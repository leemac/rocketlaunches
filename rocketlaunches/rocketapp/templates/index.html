{% extends "shared/__base.html" %}
{% load humanize %}
{% load app_filters %}

{% block content %}

	<div class="page-title">
		<h3>Upcoming Launches</h3>
	</div>

    {% for launch in launches %}

    <div class="listing launch-row clearfix">
		<div class="col-meta">
			<div class="title">{{ launch.rocket.name }}</div>
			{% if launch.customer %}
				<div class="meta">Customer: {{launch.customer}}</div>
			{% endif %}
			{% if launch.payload %}
				<div class="meta">Payload: {{launch.payload}}</div>
			{% endif %}
			{% if launch.orbit %}
				<div class="meta">Orbit: {{launch.orbit}}</div>
			{% endif %}
		</div>	
		<div class="col-countdown"> 
			{{ launch.launch_date|get_launch_displaytext }}
			{{ launch|get_launch_displaytext_extra|safe }}
		</div>	
	</div>

	{% endfor %}

	<script>
		$(function () {
			$(".countdown").each(function () {
				var date = $(this).attr("js-launch-date");

				countdown(new Date(date),
						    function(ts) {
						      $(this).html(ts.toHTML());
						    },
						    countdown.DAYS|countdown.HOURS|countdown.MINUTES|countdown.SECONDS);
			});
	
		});
	</script>

{% endblock %}